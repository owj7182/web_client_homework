<!DOCTYPE html>
<html lang="en">
<head>    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UIêµ¬í˜„</title>    
    <style>
        body {
            background-color: #deeaf6;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0; 
        }
        
        fieldset {
            width: 400px;
            height: 500px;
            background-color: #ededed;
            padding-left: 30px;
            padding-right: 30px;
            padding-top: 100px;
        }

        /* ê°€ì…ë²„íŠ¼ */
        button {
            width: 400px;
            height: 70px;
            background-color: #c6dfb6;
            color: #506c3c;
            font-size: large;
            font-weight: bold;
        }

        /* inputë°•ìŠ¤ í´ë¦­ì‹œ í…Œë‘ë¦¬ ì—†ì• ê¸° */
        input:focus {outline:none;}

        /* ì•„ì´ë”” */
        .username {
            padding-bottom: 20px;
        }
        #username {
            width: 270px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }
        
        /* íŒ¨ìŠ¤ì›Œë“œ */
        .password {
            padding-bottom: 20px;
        }
        #password {
            width: 270px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }

        /* íŒ¨ìŠ¤ì›Œë“œ í™•ì¸ */
        .checkPassword {
            padding-bottom: 20px;
        }
        #checkPassword {
            width: 270px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }

        /* ì´ë©”ì¼ */
        .email {
            padding-bottom: 30px;
            width: 400px;
        }
        #email1 {
            width: 123px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }
        #email2 {
            width: 123px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }
        /* ì£¼ì†Œ */
        .address {
            padding-bottom: 30px;
            width: 400px;
        }
        #address1 {
            width: 270px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }
        #address2 {
            width: 270px;
            border: none;
            border-bottom: dashed;
            background-color: #ededed;
        }
    </style>
</head>
<body>
    <form name="signupFrm" action="javascript:requestSignup();">
        <fieldset>
            <div class="username" style="height: 52px;">
                <span style="padding-right: 56px; font-size: large; font-weight: 900;">ì•„ì´ë””</span>
                <input type="text" name="username" id="username" required onblur="checkblur(this);" onfocus="checkfocus(this);">
                <span style="padding-left: 118px; font-weight: 100;">
                    <sup class="reqMsg" style="display:none; color: red;">í•„ìˆ˜ ì…ë ¥ì‚¬í•­ ì…ë‹ˆë‹¤.</sup>
                </span>
            </div>

            <div class="password" style="height: 52px;">
                <span style="padding-right: 39px; font-size: large; font-weight: 900;">íŒ¨ìŠ¤ì›Œë“œ</span> 
                <input type="password" name="password" id="password" required onblur="checkblur(this);" onfocus="checkfocus(this);"><br>
                <span style="padding-left: 118px; font-weight: 100;">
                    <sup id="pwdMsg" style="display:none">ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì, íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8~32ì</sup>
                    <sup class="reqMsg" style="display:none; color: red;">í•„ìˆ˜ ì…ë ¥ì‚¬í•­ ì…ë‹ˆë‹¤.</sup>
                </span>
            </div>

            <div class="checkPassword" style="height: 52px;">
                <span style="font-size: large; font-weight: 900;">íŒ¨ìŠ¤ì›Œë“œ í™•ì¸</span>
                <input type="password" name="checkPassword" id="checkPassword" required onblur="checkblur(this);" onfocus="checkfocus(this);">
                <span style="padding-left: 118px; font-weight: 100;">
                    <sup class="reqMsg" style="display:none; color: red;">í•„ìˆ˜ ì…ë ¥ì‚¬í•­ ì…ë‹ˆë‹¤.</sup>
                </span>
            </div>

            <div class="email">
                <span style="padding-right: 61px; font-size: large; font-weight: 900;">ì´ë©”ì¼</span>
                <input type="text" name="email1" id="email1">@<input type="text" name="email2" id="email2">
            </div>

            <div class="address">
                <span style="padding-right: 79px; font-size: large; font-weight: 900;">ì£¼ì†Œ</span>
                <input type="text" name="address1" id="address1"><br><br>
                <span style="padding-left: 120px;"><input type="text" name="address2" id="address2"></span>
            </div>

            <div>
                <button>ê°€ì…</button>
            </div>
            
        </fieldset>
    </form>
    <script>
        const frm = document.signupFrm;
        const username = frm.username;
        const password = frm.password;
        const checkPassword = frm['checkPassword'];
        const email = frm.email1 + '@' + frm.email2; 
        const address = frm.address1 + frm.address2; 

        document.signupFrm.onsubmit = (e) => {
            
            // requiedì˜ ì˜í–¥ìœ¼ë¡œ ëœ¨ì§€ ì•ŠëŠ”ê²ƒ ê°™ë‹¤ requiredì‚­ì œ ì‹œ ì •ìƒì‘ë™í•˜ëŠ”ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.
            // if (!username.value || !password.value || !checkPassword.value) {
            //     alert('í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.');
            //     e.preventDefault();
            //     return false;
            // } 

            // ë¹„ë°€ë²ˆí˜¸ ì¡°ê±´ì— ë§ëŠ” ì •ê·œì‹ í‘œí˜„
            const regexps = [/^.{8,32}$/, /[A-Za-z]/, /[0-9]/, /[!@#$%^&*()]/];
            const value = password.value;
   

            // ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬
            if(!regexps[0].test(value)) {
                    alert('ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8 ~ 32ì');
                    e.preventDefault();
                    return;
            }
            // ì˜ë¬¸ì í¬í•¨
            if(!regexps[1].test(value)) {
                alert('ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8 ~ 32ì');
                e.preventDefault();
                return;
            }
            // ìˆ«ì í¬í•¨
            if(!regexps[2].test(value)) {
                alert('ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8 ~ 32ì');
                e.preventDefault();
                return;
            }
            // íŠ¹ìˆ˜ë¬¸ì(!@#$%^&*())í¬í•¨
            if(!regexps[3].test(value)) {
                alert('ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8 ~ 32ì');
                e.preventDefault();
                return;
            }

            // ë¹„ë°€ë²ˆí˜¸ ì¼ì¹˜ì—¬ë¶€
            if (password.value !== checkPassword.value) {
                alert('ë‘ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                password.select(); 
                e.preventDefault();
                return false;
            }
        };

        checkPassword.addEventListener('blur', (e) => {
            if (password.value !== checkPassword.value) {
                alert('ë‘ ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                password.select(); 
            }        
        })


        // í´ë¦­ì‹œ ë¬¸êµ¬
        /*password.addEventListener('click', () => {
            alert('ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì, íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8~32ì');
         });*/

        
        let pwdMsg = document.getElementById("pwdMsg");

        // íŒ¨ìŠ¤ì›Œë“œ í´ë¦­ì‹œ "ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì, íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8~32ì"ë¬¸ì ì¶œë ¥
        password.addEventListener('click', () => {
            console.log(pwdMsg);
            pwdMsg.style.display="";
        });

        // focusì—ì„œ ë‚˜ê°ˆ ì‹œ "ì˜ë¬¸ì ëŒ€/ì†Œë¬¸ì, íŠ¹ìˆ˜ë¬¸ì, ìˆ«ì í¬í•¨ 8~32ì" ë¬¸êµ¬ ì‚¬ë¼ì§
        password.addEventListener('blur', () => {
            pwdMsg.style.display="none";
        })

        // inputì— ê´€í•œ ë¶„ê¸°ì²˜ë¦¬
        let reqMsgs = document.querySelectorAll('input');
        reqMsgs.forEach((input, index) => {
            input.addEventListener('click', () => {
                for(let i = 0; i < index; i++){
                    console.log(index)
                    if(i < 3){
                        checkblur(reqMsgs[i])
                    }
                }

            });
        });
        
        
        function checkblur(e){
            if(e.value == ""){
                e.parentElement.querySelector('.reqMsg').style.display="";
            }

        }

        function checkfocus(e){
            e.parentElement.querySelector('.reqMsg').style.display="none";
        }

         // í¼ ì œì¶œ ì—¬ë¶€
        const requestSignup = () => {
            console.log('íšŒì›ê°€ì… ì„±ê³µ~ ğŸ˜');
            alert(`${username.value} íšŒì›ê°€ì…ì„ í™˜ì˜í•©ë‹ˆë‹¤.`);
            frm.reset();  
        };
    </script>
</body>
</html>